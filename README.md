# Type-7

Клиент для авторизации с [type-6-sso](https://github.com/timattt/TypeSix).

## Для разработчиков

Вот [тут](https://github.com/timattt/TypeSeven/blob/master/scripts/debug) есть инструкция по запуску и тестированию продукта.

## Конвеер работы

* кликаем на кнопку логин
* нас перебрасывают на страницу логина сервера, причем мы в параметрах этого запроса указываем куда нас вернуть с кодом авторизации после самой авторизации через третью сторону (яндекс, гитхаб и тд)
* после авторизации где-то нас возвращают обратно на url: type-7.com/code?code=something. Приложение считывает код.
* потом код обменивается на JWT-токен через эндпоинт type-6
* если все успешно, то глобльная redux-переменная ставится в значение успешной авторизации
* тогда реакт-роутер разблокирует закрытые url, причем он сначала сделает запрос на валидность токена
* в итоге нас перебрасывают на страницу успешной авторизации, где делается запрос на user-info, после получение отображется информация о пользователе, которая получена от третьей стороны

## Переменные окружения, необходимые для запуска

* REACT_APP_TYPE7_CLIENT_ID
* REACT_APP_TYPE7_CLIENT_SECRET
* REACT_APP_TYPE7_REDIRECT_URI
* REACT_APP_TYPE7_SERVER_IP
* REACT_APP_TYPE7_METADATA_SERVER_IP
